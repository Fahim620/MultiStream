{% extends "./default.html" %}

{% block title %}
  MultiStream
{% endblock %}

{% block content %}

<div id="body">
  <button id="collapse" class="overlay btn btn-secondary" onclick="collapse()" type="button" role="button"
  data-bs-toggle="tooltip" data-bs-placement="right" data-bs-custom-class="tooltip" data-bs-title="Collapse">
    <i class="fa-sharp fas fa-arrow-right-from-line fa-lg"></i>
  </button>

  <button id="switch-chat" class="overlay btn btn-secondary" onclick="switchChat()" type="button" role="button"
  data-bs-toggle="tooltip" data-bs-placement="right" data-bs-custom-class="tooltip" data-bs-title="Switch Chat">
    <i class="fa-sharp fa-solid fa-repeat"></i>
  </button>

  <div id="stream-overlay">
    <button id="expand" class="overlay btn btn-secondary" onclick="expand()" type="button" role="button"
    data-bs-toggle="tooltip" data-bs-placement="left" data-bs-custom-class="tooltip" data-bs-title="Expand"
    style="display: none;">
      <i class="fa-sharp fas fa-arrow-left-from-line fa-lg"></i></i>
    </button>
    <div id="dropdown" class="dropstart">
      <button id="settings" class="overlay btn btn-secondary" type="button" role="button" data-bs-toggle="dropdown">
        <i class="fa-sharp fa-solid fa-wrench"></i>
      </button>
      <ul class="dropdown-menu">
        <li><span class="dropdown-header">Layouts</span></li>
        <li><button class="dropdown-item" type="button" onclick="switchSideBySide()">Side-by-Side</button></li>
        <li><button class="dropdown-item" type="button" onclick="switchStacked()">Stacked</button></li>
        <li><button class="dropdown-item" type="button" onclick="switchCostream()">Co-stream</button></li>
      </ul>
    </div>
    <button id="fullscreen" class="overlay btn btn-secondary" onclick="toggleFullScreen()" type="button" role="button"
    data-bs-toggle="tooltip" data-bs-placement="left" data-bs-custom-class="tooltip" data-bs-title="Fullscreen">
      <i id="fullscreen-icon" class="fa-sharp fa-solid fa-expand"></i>
    </button>
    <button id="toggle-second-screen" class="overlay btn btn-secondary" onclick="toggleSecondStream()" type="button" role="button"
    data-bs-toggle="tooltip" data-bs-placement="left" data-bs-custom-class="tooltip" data-bs-title="Toggle Second Stream">
      <i id="toggle-icon" class="fa-sharp fa-solid fa-video"></i>
    </button>
    <button id="swap" class="overlay btn btn-secondary" onclick="swap()" type="button" role="button"
    data-bs-toggle="tooltip" data-bs-placement="left" data-bs-custom-class="tooltip" data-bs-title="Swap">
      <i class="fa-sharp fa-solid fa-right-left"></i>
    </button>
  </div>

  <div class="container-fluid min-vh-100 d-flex flex-column">
    <div class="row flex-grow-1">
      {% comment %} MAIN VIDEO STREAMS {% endcomment %}
      <div id="main" class="m-0 p-0 d-flex flex-column" style="width: calc(100% - var(--chat-width));">
        <div id="stream-content" class="m-0 row flex-grow-1">
          <iframe id="stream-1" class="p-0 flex-grow-1" style="width: 50%;"
            frameborder="0"
            allowfullscreen>
          </iframe>
          <iframe id="stream-2" class="p-0 flex-grow-1" style="width: 50%;"
            frameborder="0"
            allowfullscreen>
          </iframe>
        </div>
      </div>
      
      {% comment %} CHAT SIDEBAR {% endcomment %}
      <div id="chat" class="m-0 p-0 flex-column" style="width: var(--chat-width); display: flex;">
        <iframe class="m-0 p-0 flex-grow-1" id="chat-1"
          frameborder="0">
        </iframe>
        <iframe class="m-0 p-0 flex-grow-1" id="chat-2" style="display: none;"
          frameborder="0">
        </iframe>
      </div>
      
    </div>
  </div>
</div>
<script>
  init("{{ channel1 }}", "{{ channel2 }}")
</script>
{% endblock %}